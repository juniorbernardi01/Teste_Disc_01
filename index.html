<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ranking DISC – Grupo Compacto Premium</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f3f4f6;
        padding: 12px;
    }

    h2, h3 {
        color: #1B4B8C;
        text-align: center;
        margin: 4px 0;
    }

    .subtexto {
        text-align: center;
        font-size: 13px;
        color: #555;
        margin-bottom: 10px;
    }

    .container-ranking {
        border: 2px solid #1B4B8C;
        background: #ffffff;
        border-radius: 10px;
        padding: 10px;
        margin-bottom: 15px;
    }

    .slot {
        background: #f5f7ff;
        border: 2px dashed #9bb1ff;
        border-radius: 8px;
        padding: 8px;
        min-height: 48px;
        margin-bottom: 6px;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        font-size: 13px;
        color: #555;
        box-sizing: border-box;
    }

    .slot:last-child {
        margin-bottom: 0;
    }

    .slot-label {
        font-weight: bold;
        color: #1B4B8C;
        font-size: 12px;
        margin-right: 8px;
        white-space: nowrap;
    }

    .slot.filled {
        border-style: solid;
        border-color: #1B4B8C;
        background: #e6edff;
        color: #1B4B8C;
        font-weight: bold;
    }

    /* Lista de adjetivos */
    .adjetivos-titulo {
        font-size: 14px;
        color: #1B4B8C;
        margin: 6px 0 6px 4px;
        font-weight: bold;
    }

    .adjetivos-lista {
        margin-top: 4px;
    }

    .adjetivo-card {
        background: #ffffff;
        padding: 8px 10px;
        border-radius: 8px;
        margin-bottom: 6px;
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: 6px;
        cursor: grab;
        box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        transition: transform 0.1s ease;
    }

    .adjetivo-card:active {
        transform: scale(1.02);
        cursor: grabbing;
    }

    .handle {
        font-size: 18px;
        color: #333;
        flex-shrink: 0;
    }

    /* Fantasma do card quando segue o dedo */
    .drag-ghost {
        position: fixed;
        z-index: 9999;
        max-width: 92%;
        padding: 8px 10px;
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 5px 10px rgba(0,0,0,0.25);
        pointer-events: none;
        opacity: 0.95;
        transform: translate(-50%, -50%);
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    @media (min-width: 768px){
        body {
            max-width: 480px;
            margin: 0 auto;
        }
    }
</style>
</head>

<body>

<h2>Grupo 1</h2>
<div class="subtexto">
    Arraste os adjetivos <b>de baixo</b> para as caixas <b>acima</b>.<br>
    <b>Topo = mais parecido com você</b> &mdash; <b>Última caixa = menos parecido</b>.
</div>

<div class="container-ranking" id="ranking">
    <div class="slot" data-pos="1" data-placeholder="1º lugar – O que MAIS se parece com você">
        <span class="slot-label">1º</span>
        <span class="slot-text">O que MAIS se parece com você</span>
    </div>
    <div class="slot" data-pos="2" data-placeholder="2º lugar – O segundo mais parecido">
        <span class="slot-label">2º</span>
        <span class="slot-text">O segundo mais parecido</span>
    </div>
    <div class="slot" data-pos="3" data-placeholder="3º lugar – O terceiro mais parecido">
        <span class="slot-label">3º</span>
        <span class="slot-text">O terceiro mais parecido</span>
    </div>
    <div class="slot" data-pos="4" data-placeholder="4º lugar – O que MENOS se parece com você">
        <span class="slot-label">4º</span>
        <span class="slot-text">O que MENOS se parece com você</span>
    </div>
</div>

<div class="adjetivos-titulo">Adjetivos disponíveis (arraste para as caixas acima):</div>

<div class="adjetivos-lista" id="lista">
    <div class="adjetivo-card" draggable="true" data-id="0">
        <span class="handle">☰</span>
        <span>Autoconfiante / Independente / Dominante</span>
    </div>
    <div class="adjetivo-card" draggable="true" data-id="1">
        <span class="handle">☰</span>
        <span>Comunicativo / Alegre / Extrovertido</span>
    </div>
    <div class="adjetivo-card" draggable="true" data-id="2">
        <span class="handle">☰</span>
        <span>Acolhedor / Amigável / Paciente</span>
    </div>
    <div class="adjetivo-card" draggable="true" data-id="3">
        <span class="handle">☰</span>
        <span>Autodisciplinado / Detalhista / Diligente</span>
    </div>
</div>

<script>
let draggingCard = null;
let ghost = null;

/* ---------------- MOBILE: seguir o dedo ---------------- */

document.querySelectorAll(".adjetivo-card").forEach(card => {

    card.addEventListener("touchstart", e => {
        draggingCard = card;

        ghost = card.cloneNode(true);
        ghost.classList.add("drag-ghost");
        document.body.appendChild(ghost);

        card.style.opacity = "0.3";

        const touch = e.touches[0];
        ghost.style.left = touch.clientX + "px";
        ghost.style.top = touch.clientY + "px";
    }, { passive: true });

    card.addEventListener("touchmove", e => {
        if (!ghost) return;
        e.preventDefault();

        const touch = e.touches[0];
        ghost.style.left = touch.clientX + "px";
        ghost.style.top = touch.clientY + "px";
    }, { passive: false });

    card.addEventListener("touchend", e => {
        if (!draggingCard) return;

        draggingCard.style.opacity = "1";

        const touch = e.changedTouches[0];
        const elem = document.elementFromPoint(touch.clientX, touch.clientY);

        const slot = elem ? elem.closest(".slot") : null;

        if (slot) {
            preencherSlot(slot, draggingCard);
        }

        if (ghost) {
            ghost.remove();
            ghost = null;
        }
        draggingCard = null;
    });
});

/* ---------------- DESKTOP: drag & drop padrão ---------------- */

document.querySelectorAll(".adjetivo-card").forEach(card => {
    card.addEventListener("dragstart", () => {
        draggingCard = card;
        setTimeout(() => card.style.opacity = "0.3", 0);
    });

    card.addEventListener("dragend", () => {
        if (draggingCard) draggingCard.style.opacity = "1";
        draggingCard = null;
    });
});

document.querySelectorAll(".slot").forEach(slot => {

    slot.addEventListener("dragover", e => e.preventDefault());

    slot.addEventListener("drop", () => {
        if (!draggingCard) return;
        preencherSlot(slot, draggingCard);
    });

    // Clique no slot para limpar e devolver o adjetivo
    slot.addEventListener("click", () => {
        if (slot.dataset.cardId) {
            removerDoSlot(slot);
        }
    });
});

/* ---------------- FUNÇÕES PRINCIPAIS ---------------- */

function preencherSlot(slot, card) {
    // Se já tinha algo aqui, devolve pra lista
    removerDoSlot(slot);

    // Marca o texto do adjetivo dentro da caixa
    const textEl = slot.querySelector(".slot-text");
    if (textEl) {
        textEl.textContent = card.innerText.replace("☰", "").trim();
    } else {
        slot.textContent = card.innerText.replace("☰","").trim();
    }

    slot.classList.add("filled");
    slot.dataset.cardId = card.dataset.id;

    // Some da lista, mas sem perder referência (para poder voltar)
    card.style.display = "none";
}

function removerDoSlot(slot) {
    const id = slot.dataset.cardId;
    if (!id) return;

    const card = document.querySelector(`.adjetivo-card[data-id="${id}"]`);
    if (card) {
        card.style.display = "flex";
    }

    const placeholder = slot.dataset.placeholder || "";
    const pos = slot.getAttribute("data-pos");

    const textEl = slot.querySelector(".slot-text");
    if (textEl) {
        // Devolve a frase padrão
        if (pos === "1") textEl.textContent = "O que MAIS se parece com você";
        else if (pos === "2") textEl.textContent = "O segundo mais parecido";
        else if (pos === "3") textEl.textContent = "O terceiro mais parecido";
        else if (pos === "4") textEl.textContent = "O que MENOS se parece com você";
        else textEl.textContent = placeholder;
    } else {
        slot.textContent = placeholder || (pos + "º lugar – Coloque aqui");
    }

    slot.classList.remove("filled");
    delete slot.dataset.cardId;
}
</script>

</body>
</html>
