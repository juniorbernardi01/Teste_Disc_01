<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teste DISC – Drag & Drop Premium</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f6f9;
        padding: 20px;
    }

    h3 {
        margin: 10px 0 5px 5px;
        font-weight: bold;
        color: #333;
    }

    .drag-container {
        border: 2px solid #ccc;
        border-radius: 10px;
        padding: 15px;
        background: white;
        margin-bottom: 10px;
    }

    .card {
        background: #f1f1f1;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 10px;
        cursor: grab;
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 16px;
        transition: transform 0.2s ease;
        box-shadow: 0 4px 6px rgba(0,0,0,0.07);
    }

    .card:active {
        cursor: grabbing;
        transform: scale(1.03);
    }

    .handle {
        font-size: 20px;
        color: #444;
        cursor: grab;
    }

    .placeholder {
        height: 55px;
        border: 2px dashed #bbb;
        border-radius: 10px;
        margin-bottom: 10px;
    }
</style>
</head>
<body>

<h3>Muito parecido comigo</h3>

<div id="group1" class="drag-container">
    <div class="card" draggable="true"><span class="handle">☰</span>Autoconfiante / Independente / Dominante</div>
    <div class="card" draggable="true"><span class="handle">☰</span>Comunicativo / Alegre / Extrovertido</div>
    <div class="card" draggable="true"><span class="handle">☰</span>Acolhedor / Amigável / Paciente</div>
    <div class="card" draggable="true"><span class="handle">☰</span>Autodisciplinado / Detalhista / Diligente</div>
</div>

<h3>Pouco parecido comigo</h3>

<script>
let draggingCard = null;
let placeholder = document.createElement("div");
placeholder.className = "placeholder";

document.querySelectorAll(".card").forEach(card => {
    card.addEventListener("touchstart", startDrag, { passive: true });
    card.addEventListener("touchmove", moveDrag, { passive: false });
    card.addEventListener("touchend", endDrag);

    card.addEventListener("dragstart", (e) => {
        draggingCard = card;
        setTimeout(() => card.style.display = "none", 0);
    });

    card.addEventListener("dragend", () => {
        card.style.display = "flex";
        draggingCard = null;
        placeholder.remove();
    });
});

function startDrag(e) {
    draggingCard = e.target.closest(".card");
    draggingCard.style.opacity = "0.7";

    draggingCard.parentNode.insertBefore(placeholder, draggingCard.nextSibling);
}

function moveDrag(e) {
    e.preventDefault();

    let touch = e.touches[0];
    let card = draggingCard;
    let container = document.getElementById("group1");
    let elements = [...container.querySelectorAll(".card:not(.placeholder)")];

    let closest = elements.reduce((closestElem, child) => {
        let offset = touch.clientY - child.offsetTop - child.offsetHeight / 2;
        if (offset < 0 && offset > closestElem.offset) {
            return { offset: offset, element: child };
        } else {
            return closestElem;
        }
    }, { offset: Number.NEGATIVE_INFINITY });

    if (closest.element) {
        container.insertBefore(placeholder, closest.element);
    } else {
        container.appendChild(placeholder);
    }
}

function endDrag() {
    draggingCard.style.opacity = "1";
    placeholder.replaceWith(draggingCard);
    draggingCard = null;
}
</script>

</body>
</html>
